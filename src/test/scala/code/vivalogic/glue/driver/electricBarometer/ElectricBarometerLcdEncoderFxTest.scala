package code.vivalogic.glue.driver.electricBarometer

import javafx.embed.swing.JFXPanel

import org.scalatest.{BeforeAndAfterAll, FlatSpec, Matchers}
import uk.co.vivalogic.encoders.ElectricBarometerLcdEncoder

import scalafx.scene.image.Image

class ElectricBarometerLcdEncoderFxTest extends FlatSpec with Matchers with BeforeAndAfterAll {
    new JFXPanel()

  "The Electric Barometer LCD Converter" should "encode an image for LCD display" in {
    val path = new java.io.File( "." ).getCanonicalPath

    val image = new Image("file:" + path + "/src/test/webapp/img/32x202.png")
    val encoded = ElectricBarometerLcdEncoder.convertImage(image, 32, 202)
    encoded should be ("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc03ffe00000fffffffffff801fffffffffffffffffffffffffff800ffe000007fffffffffc001fffffffffffffbfffffffffffff0007fe000003fffffffffc003fffffffffffff3ffffffffffffe0003fc000001fffffffffc3fffc03fffffffff3fbffffffffffc0000fc000000fffffffffffffe000ffffffffe3f8ffffffffff800003c0000007ffffffffffff80007fffffffe3f8ffffffffff00000000000003fffffffffe7f00003fffffffc3f83ffffffffe00000000000001ffffffffe07e00003fffffff83f83ffffffffc00000000000000ffffffff007e00001fffffff83f81ffffffff8000000000000007ffffffc007c00c01fffffff03f81ffffffff0000000000000003fffffe0007c00c00ffffffe03f80fffffffe0000000000000003fffff0000f800c00ffffffe03fc07ffffff80000000000000001ffffc0000f800c007fffffc03ff07ffffff00000000000000000ffff80000f800c007fffff803ffe3fffffe000000001ffe000007ffe00000f800e003fffff803fffffffffc00000003fffff80007ffc00000f001e003fffff003fffffffff80000003fffffff0007ff000000f001e003fffff003fffffffff0000000fffffffff003fe000000f003e003ffffe003ffffffffc0000007fffc003ff803fc000000f003e003ffffc003ffffffff8000001ff9f8001ffe03f8000000f001e003ffffc003ffffffff0000007f81f0001fff03f0000000f800e003ffff8003fffffffe000001fc01f0000fff07e000000078006003ffff8003fffffffc000007f003e00007ff87c000000078006003ffff0003fffffff000001f8003c00003ff1f8000000078006003ffff0003ffffffe000007e0003c00001ffff000000007c006003fffe0003ffffff800001f800078000007fff000600003c006003fffe0003ffffff000007e000078000001ffe000e00003e006003fffc0003fffffe00001f80000780000003fc000e00003f000001fff80003fffffe00007e00000700000000fc001f00001f800001fff80003fffffc0001fc00000f000000007c001f00000fc00003fff00003ffffffffffffffffffffffffffffffffffffffffffffffe00003f")
  }
}